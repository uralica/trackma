from PyQt5 import QtCore

class AddTableModel(QtCore.QAbstractTableModel):
    def __init__(self, parent=None):
        self.results = None

        super().__init__(parent)

    def setResults(self, new_results):
        self.beginResetModel()
        self.results = new_results
        self.endResetModel()

    def rowCount(self, parent):
        if self.results:
            return len(self.results)
        else:
            return 0
    
    def columnCount(self, parent):
        return 3

    def headerData(self, section, orientation, role):
        if role == QtCore.Qt.DisplayRole:
            if section == 0:
                return "Name"
            elif section == 1:
                return "Type"
            elif section == 2:
                return "Total"

        return "None"

    def data(self, index, role):
        row, column = index.row(), index.column()

        if role == QtCore.Qt.DisplayRole:
            if column == 0:
                return self.results[row]['title']
            elif column == 1:
                return self.results[row]['type']
            elif column == 2:
                return str(self.results[row]['total'])

        return None

